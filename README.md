# Utilsplugin - Minecraft サーバー管理プラグイン

Minecraftサーバーの運営を便利にする多機能プラグインです。チャットのカスタマイズ、プライベートメッセージ、管理コマンド、タブリスト、スコアボードなど、サーバー運営に必要な機能を提供します。

## 📋 目次

- [主な機能](#-主な機能)
- [インストール方法](#インストール方法)
- [設定ガイド](#設定ガイド)
- [コマンド一覧](#コマンド一覧)
- [権限一覧](#権限一覧)
- [トラブルシューティング](#トラブルシューティング)

---

## 🎯 主な機能

### 1. チャットシステム
- **カスタマイズ可能なチャットフォーマット**
  - プレイヤー名、ワールド名、時刻などのプレースホルダーに対応
  - カラーコードのサポート
    - 標準のカラーコード（例: `&a`, `&b`）
    - HEXカラーコード（例: `&#RRGGBB`）
      - 例: 赤と白のグラデーションを作成する場合
        ```
        &#FB0000t&#FC5555e&#FEAAAAs&#FFFFFFt
        ```
        上記のコードは、"test"という文字列を赤から白へのグラデーションで表示します。
  - メンション機能（`@プレイヤー名`または`プレイヤー名`）

### 2. プライベートメッセージシステム
- `/msg`, `/tell`, `/w` でプライベートメッセージを送信
- `/reply` または `/r` で返信
- カスタマイズ可能な送受信フォーマット
- 受信時のサウンド再生

### 3. サーバー管理コマンド
- **ブロードキャスト** (`/broadcast`) - サーバー全体にお知らせ
- **ソーシャルスパイ** (`/socialspy`) - プライベートメッセージを監視
- **チャットミュート** (`/mutechat`) - サーバー全体のチャットをミュート
- **AFK** (`/afk`) - 離席状態の切り替え（自動検出機能付き）

### 4. 定期メッセージ
- 設定した間隔（分単位）で自動的にメッセージを送信
- 複数のメッセージをローテーション表示
- プレースホルダー対応

### 5. タブリスト（プレイヤーリスト）
- **カスタマイズ可能なヘッダーとフッター**
  - 各最大5行まで設定可能
  - リアルタイム更新（TPS、メモリ、時刻など）
  - プレースホルダーとカラーコード対応

### 6. スコアボード（サイドバー）
- **画面右側に情報を表示**
  - 最大15行まで設定可能
  - プレイヤー座標、Ping、TPS、メモリなどの情報
  - デフォルトで全プレイヤーに表示
  - カラーコード対応

### 7. その他の機能
- **参加/退出メッセージのカスタマイズ**
- **死亡メッセージのカスタマイズ**
- **タイムゾーン設定** - 時刻表示のタイムゾーンを変更可能

---

## 📦 インストール方法

1. **プラグインファイルの配置**
   ```
   plugins/utilsplugin-1.0.0.jar をサーバーの plugins フォルダに配置
   ```

2. **サーバーの起動**
   - サーバーを起動すると、自動的に設定ファイルが生成されます

3. **設定ファイルの編集**
   ```
   plugins/utilsplugin/config.yml を編集
   ```

4. **設定の反映**
   ```
   /utilsplugin reload コマンドを実行
   ```

---

## ⚙️ 設定ガイド

### config.yml の基本構造

```yaml
# タイムゾーン設定
timezone: "UTC"  # "Asia/Tokyo" で日本時間に変更可能

# チャットフォーマット
chat:
  enabled: true
  format: "&7[&3{world}&7] &f{player}&7: &f{message}"
  color-codes:
    enabled: true
    allow-players: true
    require-permission: false

# タブリスト設定
tablist:
  enabled: true
  update-interval: 10  # 更新間隔（tick）
  header:
    - "&6&l━━━━━━━━━━━━━━━━━━"
    - "&e&l  サーバー名  "
    - "&7オンライン: &a{online}&7/&a{max}"
  footer:
    - "&7現在時刻: &a{date} {time}"
    - "&6&l━━━━━━━━━━━━━━━━━━"

# スコアボード設定
scoreboard:
  enabled: true
  title: "&6&lサーバー情報"
  update-interval: 10
  lines:
    - "&7&m------------------"
    - "&eプレイヤー情報"
    - "&7座標: &f{player_x}, {player_y}, {player_z}"
    - "&7Ping: &f{player_ping}ms"
```

---

## 🎮 コマンド一覧

| コマンド | 説明 | 権限 |
|---------|------|------|
| `/msg <プレイヤー> <メッセージ>` | プライベートメッセージを送信 | なし |
| `/reply <メッセージ>` | 最後のメッセージに返信 | なし |
| `/broadcast <メッセージ>` | サーバー全体に放送 | `utilsplugin.broadcast` |
| `/fly [プレイヤー]` | 飛行モード切り替え | `utilsplugin.fly` |
| `/heal [プレイヤー]` | 体力と満腹度を回復 | `utilsplugin.heal` |
| `/utilsplugin reload` | 設定を再読み込み | `utilsplugin.reload` |

---

## 🔐 権限一覧

| 権限 | 説明 | デフォルト |
|------|------|-----------|
| `utilsplugin.*` | すべての権限 | op |
| `utilsplugin.chat.color` | チャットでカラーコード使用 | op |
| `utilsplugin.broadcast` | ブロードキャストコマンド | op |
| `utilsplugin.fly` | 飛行モード | op |
| `utilsplugin.heal` | 回復コマンド | op |
| `utilsplugin.reload` | 設定再読み込み | op |

---

## 🛠️ トラブルシューティング

### よくある問題と解決方法

1. **プラグインが有効化されない**
   - `plugin.yml` が正しく配置されているか確認
   - サーバーのバージョンが 1.21 以降か確認
   - エラーログを確認

2. **カラーコードが表示されない**
   - `chat.color-codes.enabled` が `true` になっているか確認
   - 権限が必要な場合、`utilsplugin.chat.color` 権限を付与

3. **タブリストが表示されない**
   - `tablist.enabled` が `true` になっているか確認
   - サーバーを再起動または `/utilsplugin reload` を実行

4. **スコアボードが更新されない**
   - `scoreboard.update-interval` を確認（推奨: 10-20）
   - サーバーを再起動または `/utilsplugin reload` を実行

---

## 📝 必要環境

- **Minecraft**: 1.21以降
- **サーバー**: Paper/Spigot/Purpur等のBukkitベースサーバー
- **Java**: 21以降

---

## 📄 ライセンス

このプラグインは自由に使用・改変できます。

---

## 👤 作者

NekoChan

---

## 🐛 バグ報告・機能要望

バグ報告や機能要望は、GitHubのIssuesページでお願いします。
